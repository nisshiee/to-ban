@(task: org.nisshiee.toban.model.Task, date: org.scala_tools.time.Imports.LocalDate, tobanOpt: Option[org.nisshiee.toban.model.Toban], members: Seq[org.nisshiee.toban.model.Member])

@import org.nisshiee.toban.controller._
@import scalaz._, Scalaz._

@main("[to-ban] toban detail") {

<h1>to-ban</h1>
<h2>toban detail</h2>

<h3>@task.shows - @date.toString</h3>

@tobanOpt match {

  case Some(toban) => {
    <p>toban: @toban.member.shows</p>
  }

  case None => {
    <p>no assignment</p>
  }

}

<h3>assign</h3>

<form action="@routes.TobanController.assign" method="post">
  <input type="hidden" name="@TobanController.taskIdKey" value="@task.id">
  <input type="hidden" name="@TobanController.dateKey" value="@date.toString">

  @tobanOpt match {

    case Some(toban) => {
      <ul>
        @members.map { m =>
          @if(m === toban.member) {
            <li><label><input type="radio" name="@TobanController.memberIdKey" value="@m.id" checked> @m.shows</label></li>
          } else {
            <li><label><input type="radio" name="@TobanController.memberIdKey" value="@m.id"> @m.shows</label></li>
          }
        }
      </ul>
    }

    case None => {
      <ul>
        @members.map { m =>
          <li><label><input type="radio" name="@TobanController.memberIdKey" value="@m.id"> @m.shows</label></li>
        }
      </ul>
    }
  }

  <input type="submit" value="assign">
</form>
}
